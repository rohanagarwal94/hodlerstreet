---
title: Sharding In Blockchains - I
date: 2018-06-06 23:43:23
author: Shubham Aggarwal
tags: [Blockchain, Scalability, Ethereum, Ziliqa, Sharding]

categories:
    - Technology
thumbnail: https://www.dropbox.com/s/v6yhi1m5zk2yzks/sharding.png?raw=1 
profilelink:
authordesc:
---

**Disclaimer:** The views in this blog are based upon my personal opinion. Please invest in ICOs after careful research and at your own risk.

Sharding is not a new concept. Sharding in traditional databases was implemented a long ago in order to make databases more scalable. But sharding in blockchains is an exciting concept. It is much more harder to implement and wasn&#39;t required until now. Sharding is quite complex so I am going to write a series of blogs discussing sharding in general, various sharding techniques and in the later blogs I will delve deeper into the technical know hows about sharding and sharding as proposed by Ethereum. As of now I can&#39;t decide on the number of blogs, but there are going to be a three or four blogs discussing this topic.

If you have been following blockchains for some time you must have come across blockchain scalability issues. The number of on-chain transactions in the Bitcoin network is limited between 3-7 transactions per second. In the Ethereum , this number is capped at around 15. This is a serious issue as compared to Visa and Mastercard where this number reaches a few thousands. This means that at this rate the use of cryptocurrencies for micro transactions is not feasible. You can&#39;t go to coffee shop and pay using crypto. The reason for this sluggish speed is the current protocol for consensus mechanism. In the current scenario, all the transactions are stored and verified by all the nodes on the blockchain network and as the network size increases, the transactions take longer to confirm. We can already see that interest in distributed ledger technologies is increasing rapidly and this problem is only going to worsen. Also, as the number of transactions increases, so will the storage space required to store the blockchain increase, which also poses a challenge to use of blockchains for micro transactions.

## Current Solutions

Blockchain developers all over the world have come up with a number of solutions to address this issue of scalability.

Some of these are off-chain solutions which handle majority of the transactions on side networks like the [Lightning Network](https://lightning.network/) about which I will discuss in some later blog.

Then there are on-chain like the Bitcoin soft fork [SegWit](https://en.wikipedia.org/wiki/SegWit) and sharding about which I am going to discuss in this blog.

There are also some other [trivial but flawed solutions](https://github.com/ethereum/wiki/wiki/Sharding-FAQ#what-are-some-trivial-but-flawed-ways-of-solving-the-problem) which are discussed in the hyperlink.

## Sharding

Sharding means breaking. In context of blockchain, it means breaking the network or transactions or states (as discussed later) in order to introduce parallelization because in blockchains, transactions are validated and verified in a sequential manner. The idea is similar to setting up multiple toll booths instead of a single toll booth so that multiple vehicles can be taxed simultaneously instead of a taxing vehicles one by one in a sequential method. Similarly, in blockchains, the network is sharded in such a way that introduces parallel verification of the transactions so that a higher number of transaction are verified each second. Sharding is a horizontal scaling mechanism which means that scaling is achieved by introducing more nodes into the network.

Sharding on centralized databases is easy to implement, but as we move to decentralized systems it becomes much more difficult because inter-shard communication is tougher to implement in decentralized systems. I will discuss various sharding techniques now and the challenges that must be overcome to successfully implement those.

Sharding can be implemented in 3 ways:

1. Network Sharding
2. Transaction Sharding
3. State Sharding

## Network Sharding

In this method, the entire set of nodes is divided into a number of shards. Each shard comes to consensus on a different subset of transactions. This is what [Zilliqa](https://www.zilliqa.com/) has implemented. The main concern in this type of implementation is the creation of shards. Shards have to be created such that no single malicious user can take control of the entire shard. Taking control of a single shard is much easier as compared to taking control of the network. To put things into perspective, if the entire network is divided into 100 shards, then a malicious user only needs to control 1% hash rate of the entire network. This is called a **1% attack.** One way to prevent this is to introduce randomization while assigning &#39;shard-id&#39; to the nodes. But this randomness has to be publicly verifiable and uniform. According to [this](https://eprint.iacr.org/2015/1015.pdf) paper, the most readily available source of such randomness is the Merkle root of transactions. If the node doesn&#39;t know in advance about the shard to which the node will be assigned, the risk of 1% attack is minimized.

## Transaction Sharding

Transaction sharding means splitting the transactions such that each shard validates and verifies a mutually exclusive subset of transactions. For instance, if there were only two shards, then one way of dividing the transactions could be on the basis of the last bit (either 0 or 1) of the transaction hash. But this type of splitting is prone to double spend attacks. Suppose a user sends out a double spend transaction and this transaction ends up in some shard different from the one handling the first spending transaction which is a high probability. Then, the second shard would assume that the double spend transaction is not a double spend transaction as it has no way of communicating with the first shard. In such cases chaos will ensue. In order to prevent this efficient cross shard communication is required. But this is a problem in itself. If there are **N** different shards, then each shard will have to communicate with the other **N-1** shards for every transaction in order to avoid double spend attacks. A solution to this could be dividing the transactions on the basis of the account that sent them out. But this solution only works in systems that don&#39;t support smart contract accounts.

## State Sharding

State sharding is what Ethereum has [almost implemented](https://twitter.com/VitalikButerin/status/991021062811930624). This method improves the scalability of blockchains as well as reduces the amount of data stored on each node.

**State** means the set of all the accounts and their corresponding balances in a blockchain network. Every transaction that happens on the blockchain network changes the state of the network. In state sharding each shard is responsible for a mutually exclusive set of accounts. All transactions that are generated between accounts of the same shard are verified by the same shard nodes easily. But as sweet as state sharding may sound, it doesn&#39;t come without its own plethora of challenges.

The first and foremost challenge is inter-shard communication. What will happen if a user wants to send out a transaction to a user is some other shard? Thus effective inter-shard communication and state exchange (which is necessary for verification) is required and this transfer of state of state should be such that it doesn&#39;t clog the system with state exchange messages. Ethereum is planning to implement this by using a method of state merkle trees &amp; receipts which I will discuss in the next blogs of this series.

Secondly, in order to prevent attacks on the networks a provision to add new nodes and random reshuffling should be there. Now reshuffling poses a great challenge as well. If some nodes of a shard are shuffled, then they must be given some time to download the data of the new shard and this introduces latency in the network.

Thirdly, a problem of data availability may also arise. Think of a scenario in which a shard goes offline due to some attack and all data is lost. Now to avoid hardware redundancy as a measure of fault tolerance has to be introduced. Data has to replicated on backup nodes. But storing all data on some nodes means centralization which defeats the whole purpose of distributed ledger technologies.

In conclusion, sharding is definitely a better way to scale blockchains than off-chain solutions but all these issues need to be addressed and properly taken care of before moving ahead. From where I stand, the future of blockchains is secure. If not sharding, then maybe some other method to scale blockchains will definitely be discovered because blockchains are in nascent stage after all.

## References

* [https://www.finextra.com/pressarticle/73493/zilliqa-tackles-scalability-with-sharding-blockchain](https://www.finextra.com/pressarticle/73493/zilliqa-tackles-scalability-with-sharding-blockchain)
* [https://www.cryptoniam.com/what-is-sharding-blockchain-sharding-explained-detail/](https://www.cryptoniam.com/what-is-sharding-blockchain-sharding-explained-detail/)
* [https://bitcoinmagazine.com/articles/op-ed-many-faces-sharding-blockchain-scalability/](https://bitcoinmagazine.com/articles/op-ed-many-faces-sharding-blockchain-scalability/)
* [https://github.com/ethereum/wiki/wiki/Sharding-FAQ](https://github.com/ethereum/wiki/wiki/Sharding-FAQ)
* [https://eprint.iacr.org/2015/1015.pdf](https://eprint.iacr.org/2015/1015.pdf)
* [https://blockgeeks.com/guides/what-are-ethereum-nodes-and-sharding/](https://blockgeeks.com/guides/what-are-ethereum-nodes-and-sharding/)
* [https://medium.com/prysmatic-labs/how-to-scale-ethereum-sharding-explained-ba2e283b7fce](https://medium.com/prysmatic-labs/how-to-scale-ethereum-sharding-explained-ba2e283b7fce)